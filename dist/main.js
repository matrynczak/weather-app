(()=>{"use strict";const e=document.querySelector(".container"),t=()=>{const t=document.createElement("div"),n=document.createElement("input");t.classList.add("city-container");const c=document.createElement("label");c.textContent="Type the city you are looking for: ",c.setAttribute("for","city"),n.setAttribute("id","city"),n.setAttribute("name","city"),n.setAttribute("placeholder","for example: london");const a=document.createElement("p");a.classList.add("city-error"),a.classList.add("error-hidden"),a.textContent="No such city. Please type correct name.",t.appendChild(c),t.appendChild(n),t.appendChild(a),e.appendChild(t)},n="https://api.openweathermap.org/data/2.5",c="db8843a06888fdc6f9009cf66020233c",a=e=>{let t=e-273.15;return Number.isInteger(t)||(t=parseFloat(t.toFixed(1))),t},d=e=>{const t=a(e),n=document.querySelector(".weather-container"),c=document.querySelector(".temperature"),d=document.querySelector(".temp-value");d.textContent="---"===e?"---":`${t} °C`,n.appendChild(c),c.appendChild(d)},o=e=>{const t=document.querySelector(".weather-container"),n=document.querySelector(".humidity"),c=document.querySelector(".humidity-value");c.textContent=`${e} %`,t.appendChild(n),n.appendChild(c)},r=e=>{const t=document.querySelector(".weather-container"),n=document.querySelector(".pressure"),c=document.querySelector(".pressure-value");c.textContent=`${e} hPa`,t.appendChild(n),n.appendChild(c)},i=e=>{const t=document.querySelector(".weather-container"),n=document.querySelector(".wind"),c=document.querySelector(".wind-value");c.textContent=`${e} m/s`,t.appendChild(n),n.appendChild(c)},s=()=>{const e=document.querySelector(".city-error");e.classList.add("error-display"),e.classList.remove("error-hidden")},l=()=>{const e=document.querySelector(".city-error");e.classList.remove("error-display"),e.classList.add("error-hidden")},u=async e=>{let t={};try{const n=`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${c}`,a=await fetch(n);t=await a.json()}catch(e){console.error("ERROR: ",e)}const n=t.length>0;return{isCity:n,x:n?t[0].lat:"",y:n?t[0].lon:""}},p=()=>{const e=document.querySelector(".container");e.replaceChildren(),t();const a=document.querySelector("#city"),p=document.createElement("div");p.classList.add("weather-container"),e.appendChild(p),(()=>{const e=document.querySelector(".container"),t=document.querySelector(".weather-container"),n=document.createElement("div");n.classList.add("weather-gif");const c=document.createElement("img");c.classList.add("weather-gif-content"),c.setAttribute("src","./icons/square.gif"),c.setAttribute("alt","Gif presenting what the weather looks like"),n.textContent="The weather looks like: ";const a=document.createElement("h2");a.textContent="",n.appendChild(a),n.appendChild(c),t.appendChild(n),e.appendChild(t)})(),(()=>{const e=document.querySelector(".container"),t=document.querySelector(".weather-container"),n=document.createElement("div");n.classList.add("temperature");const c=document.createElement("p"),a=document.createElement("span");a.classList.add("temp-value"),c.textContent="TEMPERATURE: ",a.textContent="--- °C",n.appendChild(c),n.appendChild(a),t.appendChild(n),e.appendChild(t)})(),(()=>{const e=document.querySelector(".container"),t=document.querySelector(".weather-container"),n=document.createElement("div");n.classList.add("humidity");const c=document.createElement("p"),a=document.createElement("span");a.classList.add("humidity-value"),c.textContent="HUMIDITY: ",a.textContent="--- %",n.appendChild(c),n.appendChild(a),t.appendChild(n),e.appendChild(t)})(),(()=>{const e=document.querySelector(".container"),t=document.querySelector(".weather-container"),n=document.createElement("div");n.classList.add("pressure");const c=document.createElement("p"),a=document.createElement("span");a.classList.add("pressure-value"),c.textContent="PRESSURE: ",a.textContent="--- hPa",n.appendChild(c),n.appendChild(a),t.appendChild(n),e.appendChild(t)})(),(()=>{const e=document.querySelector(".container"),t=document.querySelector(".weather-container"),n=document.createElement("div");n.classList.add("wind");const c=document.createElement("p"),a=document.createElement("span");a.classList.add("wind-value"),c.textContent="WIND: ",a.textContent="--- m/s",n.appendChild(c),n.appendChild(a),t.appendChild(n),e.appendChild(t)})(),a.addEventListener("change",(async()=>{if(document.querySelector(".weather-gif-content").setAttribute("src","./icons/loader.gif"),""===a.value)return d("---"),o("---"),r("---"),void i("---");const e=await u(a.value);if(e.isCity){l();const t=await(async(e,t)=>{let a={};try{const d=`${n}/weather?lat=${e}&lon=${t}&appId=${c}`,o=await fetch(d);a=await o.json()}catch(e){console.error("ERROR: ",e)}return{main:a.main,wind:a.wind,weatherDesc:a.weather[0]}})(e.x,e.y),a=`weather ${t.weatherDesc.description}`,s=await(async e=>{let t={};try{const n=`https://api.giphy.com/v1/gifs/translate?api_key=bb2006d9d3454578be1a99cfad65913d&s=${e}`,c=await fetch(n);t=await c.json()}catch(e){confirm.error("ERROR: ",e)}return t.data.images.original.url})(a);((e,t)=>{const n=document.querySelector(".weather-container"),c=document.querySelector(".weather-gif"),a=document.querySelector(".weather-gif-content"),d=document.querySelector("h2");d.textContent=e,a.setAttribute("src",t),c.appendChild(d),c.appendChild(a),n.appendChild(c)})(t.weatherDesc.description,s),d(t.main.temp),o(t.main.humidity),r(t.main.pressure),i(t.wind.speed)}else s()}))},m=e=>{const t=new Date(1e3*e),n=`${t.getHours()}:00:00`;return[`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`,n]},h=()=>{const e=document.querySelector(".container");e.replaceChildren(),t();const d=document.querySelector("#city"),o=document.createElement("div");o.classList.add("weather-container"),e.appendChild(o),(()=>{const e=document.querySelector(".weather-container"),t=document.createElement("ul");t.classList.add("days-list"),t.textContent="To get the data, please select the city first.",e.appendChild(t)})(),d.addEventListener("change",(async()=>{if(""===d.value)return void(document.querySelector(".days-list").textContent="To get the data, please select the city first.");const e=await u(d.value);if(e.isCity){l(),(()=>{const e=document.querySelector(".container");document.querySelector(".days-list").textContent="Fetching the data of weather...";const t=document.createElement("div");t.classList.add("loader-wrapper");const n=document.createElement("img");n.classList.add("loader-image"),n.setAttribute("src","./icons/loader.gif"),t.appendChild(n),e.appendChild(t),t.classList.add("loader-displayed")})();const t=await(async(e,t)=>{let a={};try{const d=`${n}/forecast?lat=${e}&lon=${t}&appId=${c}`,o=await fetch(d);a=await o.json()}catch(e){console.error("ERROR: ",e)}return a.list.map((e=>({dt:e.dt,main:e.main,wind:e.wind,weatherDesc:e.weather[0]})))})(e.x,e.y);(()=>{const e=document.querySelector(".loader-wrapper");document.querySelector(".container").removeChild(e)})(),(e=>{const t=document.querySelector(".days-list");t.textContent="",e.forEach((e=>{const n=document.createElement("li"),c=document.createElement("div");c.classList.add("desc-container");const d=document.createElement("div"),o=document.createElement("p"),r=document.createElement("p");d.classList.add("long-term-date"),d.appendChild(o),d.appendChild(r);const i=document.createElement("div");i.classList.add("desc-icon-container");const s=document.createElement("p");s.classList.add("long-term-desc");const l=document.createElement("img");var u;l.classList.add("weather-icon"),l.setAttribute("src",(u=e.weatherDesc.description).includes("rain")?"./icons/deszcz.svg":u.includes("clouds")?"./icons/zachmurzenie.svg":u.includes("clear sky")||u.includes("sun")?"./icons/slonce.svg":"./icons/test.png"),i.appendChild(s),i.appendChild(l),l.setAttribute("alt","Icon of the weather conditions.");const p=document.createElement("div");p.classList.add("weather-metrics");const h=document.createElement("div"),C=document.createElement("p"),y=document.createElement("p");C.textContent="Temperature",y.textContent=`${a(e.main.temp)} °C`,h.appendChild(C),h.appendChild(y);const w=document.createElement("div"),E=document.createElement("p"),v=document.createElement("p");E.textContent="Wind",v.textContent=`${e.wind.speed} m/s`,w.appendChild(E),w.appendChild(v);const q=document.createElement("div"),S=document.createElement("p"),g=document.createElement("p");S.textContent="Humidity",g.textContent=`${e.main.humidity} %`,q.appendChild(S),q.appendChild(g),p.appendChild(h),p.appendChild(w),p.appendChild(q),o.textContent=`${m(e.dt)[0]}`,r.textContent=`${m(e.dt)[1]}`,s.textContent=`${e.weatherDesc.description}`,c.appendChild(d),c.appendChild(i),n.appendChild(c),n.appendChild(p),t.appendChild(n)}))})(t)}else s()}))};(()=>{document.querySelector(".container");const e=document.querySelector(".navigation"),t=document.createElement("li"),n=document.createElement("li"),c=document.createElement("li");t.classList.add("nav-today"),t.classList.add("tab-clicked"),c.classList.add("nav-long-term"),t.textContent="Today",n.textContent="Hourly",c.textContent="Long term",e.appendChild(t),e.appendChild(c);const a=document.querySelectorAll(".navigation li");a.forEach((e=>e.addEventListener("click",(()=>{for(let e=0;e<a.length;e++)a[e].classList.contains("tab-clicked")&&a[e].classList.remove("tab-clicked");e.classList.add("tab-clicked")}))))})(),p(),(()=>{const e=document.querySelector(".nav-today"),t=document.querySelector(".nav-long-term");e.addEventListener("click",p),t.addEventListener("click",h)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUFDcEN1SSxFQUFReEksU0FBU0ksY0FBYyxNQUMvQnFJLEVBQU96SSxTQUFTSSxjQUFjLE1BQzlCc0ksRUFBVzFJLFNBQVNJLGNBQWMsTUFDeENvSSxFQUFNbEksVUFBVUMsSUFBSSxhQUNwQmlJLEVBQU1sSSxVQUFVQyxJQUFJLGVBQ3BCbUksRUFBU3BJLFVBQVVDLElBQUksaUJBQ3ZCaUksRUFBTS9ILFlBQWMsUUFDcEJnSSxFQUFLaEksWUFBYyxTQUNuQmlJLEVBQVNqSSxZQUFjLFlBQ3ZCOEgsRUFBVzNILFlBQVk0SCxHQUN2QkQsRUFBVzNILFlBQVk4SCxHQUV2QixNQUFNQyxFQUFVM0ksU0FBUzRJLGlCQUFpQixrQkFDMUNELEVBQVFsQixTQUFRb0IsR0FDWkEsRUFBSXZFLGlCQUFpQixTQUFTLEtBQzFCLElBQUksSUFBSXdFLEVBQUUsRUFBR0EsRUFBRUgsRUFBUXpGLE9BQVE0RixJQUN4QkgsRUFBUUcsR0FBR3hJLFVBQVV5SSxTQUFTLGdCQUM3QkosRUFBUUcsR0FBR3hJLFVBQVUrQixPQUFPLGVBR3BDd0csRUFBSXZJLFVBQVVDLElBQUksY0FBYyxLQUV0QyxFQ3JCTnlJLEdBRUF6RixJQUVvQixNQUNoQixNQUFNaUYsRUFBUXhJLFNBQVNDLGNBQWMsY0FDL0J5SSxFQUFXMUksU0FBU0MsY0FBYyxrQkFFeEN1SSxFQUFNbEUsaUJBQWlCLFFBQVNmLEdBQ2hDbUYsRUFBU3BFLGlCQUFpQixRQUFTb0MsRUFBMEIsRUFHakV1QyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29uc3RhbnRzL2NpdGllc0xpc3QuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29tcG9uZW50cy9saXN0T2ZDaXRpZXNTZWxlY3RMaXN0LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vY29uZmlnL2FwaVdlYXRoZXIuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvdXRpbHMvdGVtcENvbnZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29tcG9uZW50cy90ZW1wZXJhdHVyZUNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9jb21wb25lbnRzL2h1bWlkaXR5Q29tcG9uZW50LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2NvbXBvbmVudHMvcHJlc3N1cmVDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29tcG9uZW50cy93aW5kQ29tcG9uZW50LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2NvbXBvbmVudHMvY2l0eUVycm9yLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2dldC1kYXRhL2dldENvb3JkaW5hdGVzQnlOYW1lLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3BhZ2VzL2N1cnJlbnRXZWF0aGVyLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2NvbXBvbmVudHMvZ2lwaHlDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29tcG9uZW50cy9sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvZ2V0LWRhdGEvZ2V0Q3VycmVudFdlYXRoZXIuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvZ2V0LWRhdGEvZ2V0V2VhdGhlckdpZi5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy91dGlscy90aW1lc3RhbXBDb252ZXJzaW9uLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL3BhZ2VzL2xvbmdUZXJtV2VhdGhlci5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9jb21wb25lbnRzL3NpbmdsZURheUZvcmVjYXN0Q29tcG9uZW50LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2dldC1kYXRhL2dldEZpdmVEYXlzV2VhdGhlckRhdGEuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvdXRpbHMvc2V0V2VhdGhlckljb24uanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvY29tcG9uZW50cy9uYXZpZ2F0aW9uLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiAgICBleHBvcnQgY29uc3QgbGlzdE9mQ2l0aWVzID0gW1xuICAgIHtcbiAgICAgICAgdmFsdWU6ICdjcmFjb3cnLFxuICAgICAgICBuYW1lOiAnQ3JhY293JyxcbiAgICAgICAgeDogNTAuMDYsXG4gICAgICAgIHk6IDE5Ljk0XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHZhbHVlOiAndG9reW8nLFxuICAgICAgICBuYW1lOiAnVG9reW8nLFxuICAgICAgICB4OiAzNS42OCxcbiAgICAgICAgeTogMTM5LjY1XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHZhbHVlOiAnbWFkcmlkJyxcbiAgICAgICAgbmFtZTogJ01hZHJpZCcsXG4gICAgICAgIHg6IDQwLjQyLFxuICAgICAgICB5OiAzLjcwXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHZhbHVlOiAnaGVsc2lua2knLFxuICAgICAgICBuYW1lOiAnSGVsc2lua2knLFxuICAgICAgICB4OiA2MC4xNyxcbiAgICAgICAgeTogMjQuOTRcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdmFsdWU6ICdjYWlybycsXG4gICAgICAgIG5hbWU6ICdDYWlybycsXG4gICAgICAgIHg6IDMwLjA0LFxuICAgICAgICB5OiAzMS4yNFxuICAgIH0sIFxuXSIsImltcG9ydCB7IGxpc3RPZkNpdGllcyB9IGZyb20gXCIuLi9jb25zdGFudHMvY2l0aWVzTGlzdFwiO1xuXG5jb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDaXR5SW5wdXQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2l0eUlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgY2l0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBjaXR5SW5wdXRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2l0eS1jb250YWluZXInKTtcbiAgICBjb25zdCBjaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIGNpdHlMYWJlbC50ZXh0Q29udGVudCA9ICdUeXBlIHRoZSBjaXR5IHlvdSBhcmUgbG9va2luZyBmb3I6ICc7XG4gICAgY2l0eUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2NpdHknKTtcblxuICAgIGNpdHlJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2NpdHknKTtcbiAgICBjaXR5SW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2NpdHknKTtcbiAgICBjaXR5SW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdmb3IgZXhhbXBsZTogbG9uZG9uJylcblxuICAgIGNvbnN0IGNpdHlFcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjaXR5RXJyb3IuY2xhc3NMaXN0LmFkZCgnY2l0eS1lcnJvcicpO1xuICAgIGNpdHlFcnJvci5jbGFzc0xpc3QuYWRkKCdlcnJvci1oaWRkZW4nKTtcbiAgICBjaXR5RXJyb3IudGV4dENvbnRlbnQgPSAnTm8gc3VjaCBjaXR5LiBQbGVhc2UgdHlwZSBjb3JyZWN0IG5hbWUuJ1xuXG4gICAgY2l0eUlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNpdHlMYWJlbCk7XG4gICAgY2l0eUlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNpdHlJbnB1dCk7XG4gICAgY2l0eUlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNpdHlFcnJvcik7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNpdHlJbnB1dENvbnRhaW5lcik7XG59XG5cbi8vVE9ETyBvbGQgdmVyc2lvbiB3aXRoIHRoZSBsaXN0IG9mIGNpdGllc1xuXG4vL2V4cG9ydCBjb25zdCBjcmVhdGVDaXR5T3B0aW9uc0xpc3QgPSAoKSA9PiB7XG4vLyAgICBjb25zdCBzZWxlY3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgIHNlbGVjdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzZWxlY3QtY2l0eS1jb250YWluZXInKTtcbi8vICAgIGNvbnN0IHNlbGVjdENpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4vLyAgICBzZWxlY3RDaXR5TGFiZWwudGV4dENvbnRlbnQgPSAnU2VsZWN0IGNpdHkgZnJvbSB0aGUgbGlzdCAnO1xuLy8gICAgc2VsZWN0Q2l0eUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2NpdHknKTtcblxuLy8gICAgY29uc3Qgc2VsZWN0Q2l0eUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbi8vICAgIHNlbGVjdENpdHlMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnY2l0eScpO1xuLy8gICAgc2VsZWN0Q2l0eUxpc3Quc2V0QXR0cmlidXRlKCduYW1lJywgJ2NpdHknKTtcbi8vICAgIGxpc3RPZkNpdGllcy5mb3JFYWNoKGNpdHkgPT4ge1xuLy8gICAgICAgIGNvbnN0IGNpdHlPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbi8vICAgICAgICBjaXR5T3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBjaXR5LnZhbHVlKTtcbi8vICAgICAgICBjaXR5T3B0aW9uLnRleHRDb250ZW50ID0gY2l0eS5uYW1lO1xuLy8gICAgICAgIHNlbGVjdENpdHlMaXN0LmFwcGVuZENoaWxkKGNpdHlPcHRpb24pO1xuLy8gICAgfSlcblxuLy8gICAgc2VsZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdENpdHlMYWJlbCk7XG4vLyAgICBzZWxlY3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0Q2l0eUxpc3QpO1xuLy8gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdENvbnRhaW5lcik7XG4vL30iLCJleHBvcnQgY29uc3QgYXBpVXJsID0gJ2h0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNSc7XG5leHBvcnQgY29uc3QgYXBpR2VvVXJsID0gJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2dlby8xLjAvZGlyZWN0JztcbmV4cG9ydCBjb25zdCBhcHBJZCA9ICdkYjg4NDNhMDY4ODhmZGM2ZjkwMDljZjY2MDIwMjMzYyc7IiwiZXhwb3J0IGNvbnN0IGZhaHJlbmhlaXRUb0NlbHNpdXMgPSAodmFsdWUpID0+IHtcbiAgICBsZXQga2VsdmluVmFsID0gdmFsdWUtMjczLjE1O1xuICAgIGlmKCFOdW1iZXIuaXNJbnRlZ2VyKGtlbHZpblZhbCkpIHtcbiAgICAgIGtlbHZpblZhbCA9IHBhcnNlRmxvYXQoa2VsdmluVmFsLnRvRml4ZWQoMSkpO1xuICAgIH1cbiAgICAgIHJldHVybiBrZWx2aW5WYWw7XG59OyIsImltcG9ydCB7IGZhaHJlbmhlaXRUb0NlbHNpdXMgfSBmcm9tIFwiLi4vdXRpbHMvdGVtcENvbnZlcnNpb25cIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVRlbXBlcmF0dXJlQ29tcG9uZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICBjb25zdCB3ZWF0aGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItY29udGFpbmVyJyk7XG4gICAgXG4gICAgY29uc3QgdGVtcGVyYXR1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0ZW1wZXJhdHVyZS5jbGFzc0xpc3QuYWRkKCd0ZW1wZXJhdHVyZScpO1xuICAgIGNvbnN0IHRlbXBEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHRlbXBWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB0ZW1wVmFsdWUuY2xhc3NMaXN0LmFkZCgndGVtcC12YWx1ZScpO1xuXG4gICAgdGVtcERlc2MudGV4dENvbnRlbnQgPSAnVEVNUEVSQVRVUkU6ICc7XG4gICAgdGVtcFZhbHVlLnRleHRDb250ZW50ID0gJy0tLSDCsEMnXG4gXG4gICAgdGVtcGVyYXR1cmUuYXBwZW5kQ2hpbGQodGVtcERlc2MpO1xuICAgIHRlbXBlcmF0dXJlLmFwcGVuZENoaWxkKHRlbXBWYWx1ZSk7XG5cbiAgICB3ZWF0aGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRlbXBlcmF0dXJlKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQod2VhdGhlckNvbnRhaW5lcik7XG59XG5cbmV4cG9ydCBjb25zdCBzZXRUZW1wVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBjZWxzaXVzVmFsdWUgPSBmYWhyZW5oZWl0VG9DZWxzaXVzKHZhbHVlKTtcbiAgICBjb25zdCB3ZWF0aGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItY29udGFpbmVyJyk7XG4gICAgY29uc3QgdGVtcGVyYXR1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUnKTtcbiAgICBjb25zdCB0ZW1wVmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcC12YWx1ZScpO1xuXG4gICAgdGVtcFZhbHVlLnRleHRDb250ZW50ID0gdmFsdWUgPT09ICctLS0nID8gJy0tLScgOiBgJHtjZWxzaXVzVmFsdWV9IMKwQ2A7XG4gICAgd2VhdGhlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wZXJhdHVyZSk7XG4gICAgdGVtcGVyYXR1cmUuYXBwZW5kQ2hpbGQodGVtcFZhbHVlKTtcbn0iLCJleHBvcnQgY29uc3QgY3JlYXRlSHVtaWRpdHlDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBcbiAgICBjb25zdCBodW1pZGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGh1bWlkaXR5LmNsYXNzTGlzdC5hZGQoJ2h1bWlkaXR5Jyk7XG4gICAgY29uc3QgaHVtaWRpdHlEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IGh1bWlkaXR5VmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgaHVtaWRpdHlWYWx1ZS5jbGFzc0xpc3QuYWRkKCdodW1pZGl0eS12YWx1ZScpO1xuXG4gICAgaHVtaWRpdHlEZXNjLnRleHRDb250ZW50ID0gJ0hVTUlESVRZOiAnO1xuICAgIGh1bWlkaXR5VmFsdWUudGV4dENvbnRlbnQgPSAnLS0tICUnO1xuIFxuICAgIGh1bWlkaXR5LmFwcGVuZENoaWxkKGh1bWlkaXR5RGVzYyk7XG4gICAgaHVtaWRpdHkuYXBwZW5kQ2hpbGQoaHVtaWRpdHlWYWx1ZSk7XG5cbiAgICB3ZWF0aGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGh1bWlkaXR5KTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQod2VhdGhlckNvbnRhaW5lcik7XG59XG5cbmV4cG9ydCBjb25zdCBzZXRIdW1pZGl0eVZhbHVlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3Qgd2VhdGhlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IGh1bWlkaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5Jyk7XG4gICAgY29uc3QgaHVtaWRpdHlWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eS12YWx1ZScpO1xuXG4gICAgaHVtaWRpdHlWYWx1ZS50ZXh0Q29udGVudCA9IGAke3ZhbHVlfSAlYDtcbiAgICB3ZWF0aGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGh1bWlkaXR5KTtcbiAgICBodW1pZGl0eS5hcHBlbmRDaGlsZChodW1pZGl0eVZhbHVlKTtcbn0iLCJleHBvcnQgY29uc3QgY3JlYXRlUHJlc3N1cmVDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBcbiAgICBjb25zdCBwcmVzc3VyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHByZXNzdXJlLmNsYXNzTGlzdC5hZGQoJ3ByZXNzdXJlJyk7XG4gICAgY29uc3QgcHJlc3N1cmVEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIGNvbnN0IHByZXNzdXJlVmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcHJlc3N1cmVWYWx1ZS5jbGFzc0xpc3QuYWRkKCdwcmVzc3VyZS12YWx1ZScpO1xuXG4gICAgcHJlc3N1cmVEZXNjLnRleHRDb250ZW50ID0gJ1BSRVNTVVJFOiAnO1xuICAgIHByZXNzdXJlVmFsdWUudGV4dENvbnRlbnQgPSAnLS0tIGhQYSc7XG4gXG4gICAgcHJlc3N1cmUuYXBwZW5kQ2hpbGQocHJlc3N1cmVEZXNjKTtcbiAgICBwcmVzc3VyZS5hcHBlbmRDaGlsZChwcmVzc3VyZVZhbHVlKTtcblxuICAgIHdlYXRoZXJDb250YWluZXIuYXBwZW5kQ2hpbGQocHJlc3N1cmUpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyQ29udGFpbmVyKTtcbn1cblxuZXhwb3J0IGNvbnN0IHNldFByZXNzdXJlVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCB3ZWF0aGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItY29udGFpbmVyJyk7XG4gICAgY29uc3QgcHJlc3N1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlc3N1cmUnKTtcbiAgICBjb25zdCBwcmVzc3VyZVZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXNzdXJlLXZhbHVlJyk7XG5cbiAgICBwcmVzc3VyZVZhbHVlLnRleHRDb250ZW50ID0gYCR7dmFsdWV9IGhQYWA7XG4gICAgd2VhdGhlckNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmVzc3VyZSk7XG4gICAgcHJlc3N1cmUuYXBwZW5kQ2hpbGQocHJlc3N1cmVWYWx1ZSk7XG59IiwiZXhwb3J0IGNvbnN0IGNyZWF0ZVdpbmRDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBcbiAgICBjb25zdCB3aW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd2luZC5jbGFzc0xpc3QuYWRkKCd3aW5kJyk7XG4gICAgY29uc3Qgd2luZERlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29uc3Qgd2luZFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHdpbmRWYWx1ZS5jbGFzc0xpc3QuYWRkKCd3aW5kLXZhbHVlJyk7XG5cbiAgICB3aW5kRGVzYy50ZXh0Q29udGVudCA9ICdXSU5EOiAnO1xuICAgIHdpbmRWYWx1ZS50ZXh0Q29udGVudCA9ICctLS0gbS9zJztcbiBcbiAgICB3aW5kLmFwcGVuZENoaWxkKHdpbmREZXNjKTtcbiAgICB3aW5kLmFwcGVuZENoaWxkKHdpbmRWYWx1ZSk7XG5cbiAgICB3ZWF0aGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHdpbmQpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyQ29udGFpbmVyKTtcbn1cblxuZXhwb3J0IGNvbnN0IHNldFdpbmRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBjb25zdCB3aW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQnKTtcbiAgICBjb25zdCB3aW5kVmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZC12YWx1ZScpO1xuXG4gICAgd2luZFZhbHVlLnRleHRDb250ZW50ID0gYCR7dmFsdWV9IG0vc2A7XG4gICAgd2VhdGhlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3aW5kKTtcbiAgICB3aW5kLmFwcGVuZENoaWxkKHdpbmRWYWx1ZSk7XG59IiwiZXhwb3J0IGNvbnN0IGRpc3BsYXlDaXR5RXJyb3IgPSAoKSA9PiB7XG4gICAgY29uc3QgY2l0eUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktZXJyb3InKTtcbiAgICBjaXR5RXJyb3IuY2xhc3NMaXN0LmFkZCgnZXJyb3ItZGlzcGxheScpO1xuICAgIGNpdHlFcnJvci5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvci1oaWRkZW4nKTtcbn1cblxuZXhwb3J0IGNvbnN0IGhpZGVDaXR5RXJyb3IgPSAoKSA9PiB7XG4gICAgY29uc3QgY2l0eUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktZXJyb3InKTtcbiAgICBjaXR5RXJyb3IuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3ItZGlzcGxheScpO1xuICAgIGNpdHlFcnJvci5jbGFzc0xpc3QuYWRkKCdlcnJvci1oaWRkZW4nKTtcbn0iLCJpbXBvcnQgeyBhcGlHZW9VcmwsIGFwcElkIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9hcGlXZWF0aGVyXCI7XG5cbmV4cG9ydCBjb25zdCBnZXRDb29yZGluYXRlc0J5TmFtZSA9IGFzeW5jIChuYW1lKSA9PiB7XG4gICAgbGV0IGNpdHlEYXRhID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHthcGlHZW9Vcmx9P3E9JHtuYW1lfSZsaW1pdD0xJmFwcGlkPSR7YXBwSWR9YDtcbiAgICAgICAgY29uc3QgY2l0eSA9IGF3YWl0IGZldGNoKGVuZHBvaW50KTtcbiAgICAgICAgY2l0eURhdGEgPSBhd2FpdCBjaXR5Lmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFUlJPUjogJywgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc0NpdHkgPSBjaXR5RGF0YS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IHggPSBpc0NpdHkgPyBjaXR5RGF0YVswXS5sYXQgOiAnJztcbiAgICBjb25zdCB5ID0gaXNDaXR5ID8gY2l0eURhdGFbMF0ubG9uIDogJyc7XG5cbiAgICByZXR1cm4ge2lzQ2l0eSwgeCA6IHgsIHk6IHl9O1xufSIsImltcG9ydCB7IGNyZWF0ZUNpdHlJbnB1dCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2xpc3RPZkNpdGllc1NlbGVjdExpc3RcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRXZWF0aGVyQnlDb29yZGluYXRlcyB9IGZyb20gXCIuLi9nZXQtZGF0YS9nZXRDdXJyZW50V2VhdGhlclwiO1xuaW1wb3J0IHsgY3JlYXRlVGVtcGVyYXR1cmVDb21wb25lbnQsIHNldFRlbXBWYWx1ZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL3RlbXBlcmF0dXJlQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBjcmVhdGVIdW1pZGl0eUNvbXBvbmVudCwgc2V0SHVtaWRpdHlWYWx1ZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL2h1bWlkaXR5Q29tcG9uZW50XCI7XG5pbXBvcnQgeyBjcmVhdGVQcmVzc3VyZUNvbXBvbmVudCwgc2V0UHJlc3N1cmVWYWx1ZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL3ByZXNzdXJlQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBjcmVhdGVXaW5kQ29tcG9uZW50LCBzZXRXaW5kVmFsdWUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy93aW5kQ29tcG9uZW50XCI7XG5pbXBvcnQgeyBjcmVhdGVHaWZDb21wb25lbnQsIHNldEdpZlZhbHVlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvZ2lwaHlDb21wb25lbnRcIjtcbmltcG9ydCB7IGdldFdlYXRoZXJHaWZCeVRleHQgfSBmcm9tIFwiLi4vZ2V0LWRhdGEvZ2V0V2VhdGhlckdpZlwiO1xuaW1wb3J0IHsgZGlzcGxheVNtYWxsTG9hZGVyIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbG9hZGVyXCI7XG5pbXBvcnQgeyBkaXNwbGF5Q2l0eUVycm9yLCBoaWRlQ2l0eUVycm9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY2l0eUVycm9yXCI7XG5pbXBvcnQgeyBnZXRDb29yZGluYXRlc0J5TmFtZSB9IGZyb20gXCIuLi9nZXQtZGF0YS9nZXRDb29yZGluYXRlc0J5TmFtZVwiO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ3VycmVudFdlYXRoZXJQYWdlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICBjb250YWluZXIucmVwbGFjZUNoaWxkcmVuKCk7XG5cbiAgICBjcmVhdGVDaXR5SW5wdXQoKTtcbiAgICBjb25zdCBjaXR5TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaXR5Jyk7XG5cbiAgICBjb25zdCB3ZWF0aGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd2VhdGhlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3ZWF0aGVyLWNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyQ29udGFpbmVyKTtcblxuICAgIGNyZWF0ZUdpZkNvbXBvbmVudCgpO1xuICAgIGNyZWF0ZVRlbXBlcmF0dXJlQ29tcG9uZW50KCk7XG4gICAgY3JlYXRlSHVtaWRpdHlDb21wb25lbnQoKTtcbiAgICBjcmVhdGVQcmVzc3VyZUNvbXBvbmVudCgpO1xuICAgIGNyZWF0ZVdpbmRDb21wb25lbnQoKTtcblxuICAgIGNpdHlOYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgZGlzcGxheVNtYWxsTG9hZGVyKCk7XG5cbiAgICAgICAgaWYoY2l0eU5hbWUudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBzZXRUZW1wVmFsdWUoJy0tLScpO1xuICAgICAgICAgICAgc2V0SHVtaWRpdHlWYWx1ZSgnLS0tJyk7XG4gICAgICAgICAgICBzZXRQcmVzc3VyZVZhbHVlKCctLS0nKTtcbiAgICAgICAgICAgIHNldFdpbmRWYWx1ZSgnLS0tJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb29yZGluYXRlc0RhdGEgPSBhd2FpdCBnZXRDb29yZGluYXRlc0J5TmFtZShjaXR5TmFtZS52YWx1ZSk7XG4gICAgICAgIGlmKCFjb29yZGluYXRlc0RhdGEuaXNDaXR5KSB7XG4gICAgICAgICAgICBkaXNwbGF5Q2l0eUVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWRlQ2l0eUVycm9yKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHdlYXRoZXIgPSBhd2FpdCBnZXRDdXJyZW50V2VhdGhlckJ5Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXNEYXRhLngsIGNvb3JkaW5hdGVzRGF0YS55KTtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRPZldlYXRoZXJHaWYgPSBgd2VhdGhlciAke3dlYXRoZXIud2VhdGhlckRlc2MuZGVzY3JpcHRpb259YDtcbiAgICAgICAgICAgIGNvbnN0IGdpZlNyYyA9IGF3YWl0IGdldFdlYXRoZXJHaWZCeVRleHQoa2V5d29yZE9mV2VhdGhlckdpZik7XG4gICAgXG4gICAgICAgICAgICBzZXRHaWZWYWx1ZSh3ZWF0aGVyLndlYXRoZXJEZXNjLmRlc2NyaXB0aW9uLCBnaWZTcmMpO1xuICAgICAgICAgICAgc2V0VGVtcFZhbHVlKHdlYXRoZXIubWFpbi50ZW1wKTtcbiAgICAgICAgICAgIHNldEh1bWlkaXR5VmFsdWUod2VhdGhlci5tYWluLmh1bWlkaXR5KTtcbiAgICAgICAgICAgIHNldFByZXNzdXJlVmFsdWUod2VhdGhlci5tYWluLnByZXNzdXJlKTtcbiAgICAgICAgICAgIHNldFdpbmRWYWx1ZSh3ZWF0aGVyLndpbmQuc3BlZWQpO1xuICAgICAgICB9XG4gICAgfSlcbn1cbiIsImV4cG9ydCBjb25zdCBjcmVhdGVHaWZDb21wb25lbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBcbiAgICBjb25zdCBnaWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBnaWYuY2xhc3NMaXN0LmFkZCgnd2VhdGhlci1naWYnKTtcbiAgICBjb25zdCBnaWZDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgZ2lmQ29udGVudC5jbGFzc0xpc3QuYWRkKCd3ZWF0aGVyLWdpZi1jb250ZW50Jyk7XG4gICAgZ2lmQ29udGVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2ljb25zL3NxdWFyZS5naWYnKTtcbiAgICBnaWZDb250ZW50LnNldEF0dHJpYnV0ZSgnYWx0JywgJ0dpZiBwcmVzZW50aW5nIHdoYXQgdGhlIHdlYXRoZXIgbG9va3MgbGlrZScpXG5cbiAgICBnaWYudGV4dENvbnRlbnQgPSAnVGhlIHdlYXRoZXIgbG9va3MgbGlrZTogJztcblxuICAgIGNvbnN0IHdlYXRoZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgd2VhdGhlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gJyc7XG4gXG4gICAgZ2lmLmFwcGVuZENoaWxkKHdlYXRoZXJEZXNjcmlwdGlvbik7XG4gICAgZ2lmLmFwcGVuZENoaWxkKGdpZkNvbnRlbnQpO1xuXG4gICAgd2VhdGhlckNvbnRhaW5lci5hcHBlbmRDaGlsZChnaWYpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyQ29udGFpbmVyKTtcbn1cblxuZXhwb3J0IGNvbnN0IHNldEdpZlZhbHVlID0gKGRlc2MsIGdpZlVybCkgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBjb25zdCBnaWYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1naWYnKTtcbiAgICBjb25zdCBnaWZDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItZ2lmLWNvbnRlbnQnKTtcblxuICAgIGNvbnN0IHdlYXRoZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJyk7XG4gICAgd2VhdGhlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzYztcblxuICAgIGdpZkNvbnRlbnQuc2V0QXR0cmlidXRlKCdzcmMnLCBnaWZVcmwpXG4gICAgZ2lmLmFwcGVuZENoaWxkKHdlYXRoZXJEZXNjcmlwdGlvbik7XG4gICAgZ2lmLmFwcGVuZENoaWxkKGdpZkNvbnRlbnQpO1xuICAgIHdlYXRoZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZ2lmKTtcbn0iLCJleHBvcnQgY29uc3QgZGlzcGxheUxvYWRlciA9ICgpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG5cbiAgICBjb25zdCBkYXlzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXlzLWxpc3QnKTtcbiAgICBkYXlzTGlzdC50ZXh0Q29udGVudCA9ICdGZXRjaGluZyB0aGUgZGF0YSBvZiB3ZWF0aGVyLi4uJztcblxuICAgIGNvbnN0IGxvYWRlcldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsb2FkZXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xvYWRlci13cmFwcGVyJyk7XG4gICAgY29uc3QgbG9hZGVySW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBsb2FkZXJJbWFnZS5jbGFzc0xpc3QuYWRkKCdsb2FkZXItaW1hZ2UnKTtcbiAgICBsb2FkZXJJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2ljb25zL2xvYWRlci5naWYnKTtcblxuICAgIGxvYWRlcldyYXBwZXIuYXBwZW5kQ2hpbGQobG9hZGVySW1hZ2UpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkZXJXcmFwcGVyKTtcbiAgICBsb2FkZXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xvYWRlci1kaXNwbGF5ZWQnKTtcbn1cblxuZXhwb3J0IGNvbnN0IGhpZGVMb2FkZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgbG9hZGVyV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXItd3JhcHBlcicpO1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcblxuICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChsb2FkZXJXcmFwcGVyKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRpc3BsYXlTbWFsbExvYWRlciA9ICgpID0+IHtcbiAgICBjb25zdCBnaWZDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItZ2lmLWNvbnRlbnQnKTtcbiAgICBnaWZDb250ZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vaWNvbnMvbG9hZGVyLmdpZicpXG59IiwiaW1wb3J0IHsgYXBpVXJsLCBhcHBJZCB9IGZyb20gXCIuLi8uLi9jb25maWcvYXBpV2VhdGhlclwiXG5cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50V2VhdGhlckJ5Q29vcmRpbmF0ZXMgPSBhc3luYyAoeENvb3JkaW5hdGUsIHlDb29yZGluYXRlKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRXZWF0aGVyRGF0YSA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7YXBpVXJsfS93ZWF0aGVyP2xhdD0ke3hDb29yZGluYXRlfSZsb249JHt5Q29vcmRpbmF0ZX0mYXBwSWQ9JHthcHBJZH1gO1xuICAgICAgICBjb25zdCBjdXJyZW50V2VhdGhlciA9IGF3YWl0IGZldGNoKGVuZHBvaW50KTtcbiAgICAgICAgY3VycmVudFdlYXRoZXJEYXRhID0gYXdhaXQgY3VycmVudFdlYXRoZXIuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VSUk9SOiAnLCBlcnJvcik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGN1cnJlbnRXZWF0aGVyQ29uZGl0aW9ucyA9IHsgXG4gICAgICAgIG1haW46IGN1cnJlbnRXZWF0aGVyRGF0YS5tYWluLFxuICAgICAgICB3aW5kOiBjdXJyZW50V2VhdGhlckRhdGEud2luZCxcbiAgICAgICAgd2VhdGhlckRlc2M6IGN1cnJlbnRXZWF0aGVyRGF0YS53ZWF0aGVyWzBdXG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50V2VhdGhlckNvbmRpdGlvbnM7XG59IiwiaW1wb3J0IHsgYXBpVXJsLCBhcGlLZXkgfSBmcm9tIFwiLi4vLi4vY29uZmlnL2FwaUdpcGh5XCJcblxuZXhwb3J0IGNvbnN0IGdldFdlYXRoZXJHaWZCeVRleHQgPSBhc3luYyAodGV4dCkgPT4ge1xuICAgIGxldCB3ZWF0aGVyR2lmRGF0YSA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7YXBpVXJsfT9hcGlfa2V5PSR7YXBpS2V5fSZzPSR7dGV4dH1gO1xuICAgICAgICBjb25zdCB3ZWF0aGVyR2lmID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQpO1xuICAgICAgICB3ZWF0aGVyR2lmRGF0YSA9IGF3YWl0IHdlYXRoZXJHaWYuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbmZpcm0uZXJyb3IoJ0VSUk9SOiAnLCBlcnJvcilcbiAgICB9XG4gICAgXG5cbiAgICBjb25zdCBzb3VyY2UgPSB3ZWF0aGVyR2lmRGF0YS5kYXRhLmltYWdlcy5vcmlnaW5hbC51cmxcbiAgICBcbiAgICByZXR1cm4gc291cmNlO1xufSIsImV4cG9ydCAgY29uc3QgZ2V0RGF0ZUZyb21UaW1lc3RhbXAgPSAodGltZVN0YW1wKSA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVTdGFtcCoxMDAwKTtcbiAgICBjb25zdCBnZXRIb3VyID0gYCR7ZGF0ZS5nZXRIb3VycygpfTowMDowMGA7XG4gICAgY29uc3QgZ2V0RGF0ZSA9IGAke2RhdGUuZ2V0RGF0ZSgpfS8ke2RhdGUuZ2V0TW9udGgoKSsxfS8ke2RhdGUuZ2V0RnVsbFllYXIoKX1gO1xuICAgIHJldHVybiBbZ2V0RGF0ZSwgZ2V0SG91cl07XG59IiwiaW1wb3J0IHsgY3JlYXRlQ2l0eUlucHV0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbGlzdE9mQ2l0aWVzU2VsZWN0TGlzdFwiO1xuaW1wb3J0IHsgZ2V0Rml2ZURheXNXZWF0aGVyQnlDb29yZGluYXRlcyB9IGZyb20gXCIuLi9nZXQtZGF0YS9nZXRGaXZlRGF5c1dlYXRoZXJEYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVTaW5nbGVEYXlGb3JlY2FzdENvbXBvbmVudCwgc2V0TG9uZ1Rlcm1Gb3JlY2FzdCwgaGlkZUZvcmVjYXN0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2luZ2xlRGF5Rm9yZWNhc3RDb21wb25lbnRcIjtcbmltcG9ydCB7IGRpc3BsYXlMb2FkZXIsIGhpZGVMb2FkZXIgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9sb2FkZXJcIjtcbmltcG9ydCB7IGdldENvb3JkaW5hdGVzQnlOYW1lIH0gZnJvbSBcIi4uL2dldC1kYXRhL2dldENvb3JkaW5hdGVzQnlOYW1lXCI7XG5pbXBvcnQgeyBkaXNwbGF5Q2l0eUVycm9yLCBoaWRlQ2l0eUVycm9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY2l0eUVycm9yXCI7XG5cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUxvbmdUZXJtV2VhdGhlclBhZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5yZXBsYWNlQ2hpbGRyZW4oKTtcblxuICAgIGNyZWF0ZUNpdHlJbnB1dCgpO1xuICAgIGNvbnN0IGNpdHlOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKTtcbiBcbiAgICBjb25zdCB3ZWF0aGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd2VhdGhlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3ZWF0aGVyLWNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVyQ29udGFpbmVyKTtcblxuICAgIGNyZWF0ZVNpbmdsZURheUZvcmVjYXN0Q29tcG9uZW50KCk7XG5cbiAgICBjaXR5TmFtZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XG5cbiAgICAgICAgaWYoY2l0eU5hbWUudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICBoaWRlRm9yZWNhc3QoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzRGF0YSA9IGF3YWl0IGdldENvb3JkaW5hdGVzQnlOYW1lKGNpdHlOYW1lLnZhbHVlKTtcbiAgICAgICAgXG4gICAgICAgIGlmKCFjb29yZGluYXRlc0RhdGEuaXNDaXR5KSB7XG4gICAgICAgICAgICBkaXNwbGF5Q2l0eUVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoaWRlQ2l0eUVycm9yKCk7XG4gICAgICAgICAgICBkaXNwbGF5TG9hZGVyKCk7XG4gICAgICAgICAgICBjb25zdCB3ZWF0aGVyID0gYXdhaXQgZ2V0Rml2ZURheXNXZWF0aGVyQnlDb29yZGluYXRlcyhjb29yZGluYXRlc0RhdGEueCwgY29vcmRpbmF0ZXNEYXRhLnkpO1xuICAgICAgICAgICAgaGlkZUxvYWRlcigpO1xuICAgICAgICAgICAgc2V0TG9uZ1Rlcm1Gb3JlY2FzdCh3ZWF0aGVyKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgfSlcbn0iLCJpbXBvcnQgeyBnZXREYXRlRnJvbVRpbWVzdGFtcCB9IGZyb20gXCIuLi91dGlscy90aW1lc3RhbXBDb252ZXJzaW9uXCI7XG5pbXBvcnQgeyBmYWhyZW5oZWl0VG9DZWxzaXVzIH0gZnJvbSBcIi4uL3V0aWxzL3RlbXBDb252ZXJzaW9uXCI7XG5pbXBvcnQgeyBzZXRXZWF0aGVySWNvbkJ5RGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vdXRpbHMvc2V0V2VhdGhlckljb25cIjtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVNpbmdsZURheUZvcmVjYXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1jb250YWluZXInKTtcbiAgICBjb25zdCBkYXlzTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgZGF5c0xpc3QuY2xhc3NMaXN0LmFkZCgnZGF5cy1saXN0Jyk7XG4gICAgZGF5c0xpc3QudGV4dENvbnRlbnQgPSAnVG8gZ2V0IHRoZSBkYXRhLCBwbGVhc2Ugc2VsZWN0IHRoZSBjaXR5IGZpcnN0LidcblxuICAgIHdlYXRoZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5c0xpc3QpO1xufVxuXG5leHBvcnQgY29uc3Qgc2V0TG9uZ1Rlcm1Gb3JlY2FzdCA9ICh3ZWF0aGVyRGF0YSkgPT4ge1xuICAgIGNvbnN0IGRheXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRheXMtbGlzdCcpO1xuICAgIGRheXNMaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgd2VhdGhlckRhdGEuZm9yRWFjaChkYXkgPT4ge1xuICAgICAgICBjb25zdCBzaW5nbGVEYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBjb25zdCBkZXNjQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRlc2NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGVzYy1jb250YWluZXInKTtcblxuICAgICAgICBjb25zdCBkYXRlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IGRhdGVEYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IGRhdGVIb3VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkYXRlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2xvbmctdGVybS1kYXRlJyk7XG4gICAgICAgIGRhdGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZURheSk7XG4gICAgICAgIGRhdGVDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUhvdXIpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgd2VhdGhlckljb25BbmREZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdlYXRoZXJJY29uQW5kRGVzYy5jbGFzc0xpc3QuYWRkKCdkZXNjLWljb24tY29udGFpbmVyJyk7XG5cbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2xvbmctdGVybS1kZXNjJyk7XG5cbiAgICAgICAgY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgd2VhdGhlckljb24uY2xhc3NMaXN0LmFkZCgnd2VhdGhlci1pY29uJyk7XG4gICAgICAgIHdlYXRoZXJJY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgc2V0V2VhdGhlckljb25CeURlc2NyaXB0aW9uKGRheS53ZWF0aGVyRGVzYy5kZXNjcmlwdGlvbikpO1xuICAgICAgICB3ZWF0aGVySWNvbkFuZERlc2MuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuICAgICAgICB3ZWF0aGVySWNvbkFuZERlc2MuYXBwZW5kQ2hpbGQod2VhdGhlckljb24pO1xuICAgICAgICB3ZWF0aGVySWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdJY29uIG9mIHRoZSB3ZWF0aGVyIGNvbmRpdGlvbnMuJylcblxuICAgICAgICBjb25zdCB3ZWF0aGVyTWV0cmljcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB3ZWF0aGVyTWV0cmljcy5jbGFzc0xpc3QuYWRkKCd3ZWF0aGVyLW1ldHJpY3MnKTtcblxuICAgICAgICBjb25zdCB0ZW1wQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGNvbnN0IHRlbXBWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGVtcC50ZXh0Q29udGVudCA9IGBUZW1wZXJhdHVyZWA7XG4gICAgICAgIHRlbXBWYWx1ZS50ZXh0Q29udGVudCA9IGAke2ZhaHJlbmhlaXRUb0NlbHNpdXMoZGF5Lm1haW4udGVtcCl9IMKwQ2BcbiAgICAgICAgdGVtcENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wKTtcbiAgICAgICAgdGVtcENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wVmFsdWUpO1xuXG4gICAgICAgIGNvbnN0IHdpbmRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3Qgd2luZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgY29uc3Qgd2luZFZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICB3aW5kLnRleHRDb250ZW50ID0gYFdpbmRgO1xuICAgICAgICB3aW5kVmFsdWUudGV4dENvbnRlbnQgPSBgJHtkYXkud2luZC5zcGVlZH0gbS9zYDtcbiAgICAgICAgd2luZENvbnRhaW5lci5hcHBlbmRDaGlsZCh3aW5kKTtcbiAgICAgICAgd2luZENvbnRhaW5lci5hcHBlbmRDaGlsZCh3aW5kVmFsdWUpO1xuXG4gICAgICAgIGNvbnN0IGh1bWlkaXR5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IGh1bWlkaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBjb25zdCBodW1pZGl0eVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBodW1pZGl0eS50ZXh0Q29udGVudCA9IGBIdW1pZGl0eWA7XG4gICAgICAgIGh1bWlkaXR5VmFsdWUudGV4dENvbnRlbnQgPSBgJHtkYXkubWFpbi5odW1pZGl0eX0gJWA7XG4gICAgICAgIGh1bWlkaXR5Q29udGFpbmVyLmFwcGVuZENoaWxkKGh1bWlkaXR5KTtcbiAgICAgICAgaHVtaWRpdHlDb250YWluZXIuYXBwZW5kQ2hpbGQoaHVtaWRpdHlWYWx1ZSk7XG5cbiAgICAgICAgd2VhdGhlck1ldHJpY3MuYXBwZW5kQ2hpbGQodGVtcENvbnRhaW5lcik7XG4gICAgICAgIHdlYXRoZXJNZXRyaWNzLmFwcGVuZENoaWxkKHdpbmRDb250YWluZXIpO1xuICAgICAgICB3ZWF0aGVyTWV0cmljcy5hcHBlbmRDaGlsZChodW1pZGl0eUNvbnRhaW5lcik7XG5cbiAgICAgICAgZGF0ZURheS50ZXh0Q29udGVudCA9IGAke2dldERhdGVGcm9tVGltZXN0YW1wKGRheS5kdClbMF19YDtcbiAgICAgICAgZGF0ZUhvdXIudGV4dENvbnRlbnQgPSBgJHtnZXREYXRlRnJvbVRpbWVzdGFtcChkYXkuZHQpWzFdfWA7XG4gICAgICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYCR7ZGF5LndlYXRoZXJEZXNjLmRlc2NyaXB0aW9ufWA7XG4gICAgICAgIGRlc2NDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lcik7XG5cbiAgICAgICAgZGVzY0NvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWF0aGVySWNvbkFuZERlc2MpO1xuICAgICAgICBzaW5nbGVEYXkuYXBwZW5kQ2hpbGQoZGVzY0NvbnRhaW5lcik7XG4gICAgICAgIHNpbmdsZURheS5hcHBlbmRDaGlsZCh3ZWF0aGVyTWV0cmljcyk7XG5cbiAgICAgICAgZGF5c0xpc3QuYXBwZW5kQ2hpbGQoc2luZ2xlRGF5KTtcbiAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgaGlkZUZvcmVjYXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGRheXNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRheXMtbGlzdCcpO1xuICAgIGRheXNMaXN0LnRleHRDb250ZW50ID0gJ1RvIGdldCB0aGUgZGF0YSwgcGxlYXNlIHNlbGVjdCB0aGUgY2l0eSBmaXJzdC4nXG59IiwiaW1wb3J0IHsgYXBpVXJsLCBhcHBJZCB9IGZyb20gXCIuLi8uLi9jb25maWcvYXBpV2VhdGhlclwiXG5cbmV4cG9ydCBjb25zdCBnZXRGaXZlRGF5c1dlYXRoZXJCeUNvb3JkaW5hdGVzID0gYXN5bmMgKHhDb29yZGluYXRlLCB5Q29vcmRpbmF0ZSkgPT4ge1xuICAgIGxldCB3ZWF0aGVyRm9yZWNhc3REYXRhID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHthcGlVcmx9L2ZvcmVjYXN0P2xhdD0ke3hDb29yZGluYXRlfSZsb249JHt5Q29vcmRpbmF0ZX0mYXBwSWQ9JHthcHBJZH1gO1xuICAgICAgICBjb25zdCB3ZWF0aGVyID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQpO1xuICAgICAgICB3ZWF0aGVyRm9yZWNhc3REYXRhID0gYXdhaXQgd2VhdGhlci5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRVJST1I6ICcsIGVycm9yKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZm9yZWNhc3REYXRhID0gd2VhdGhlckZvcmVjYXN0RGF0YS5saXN0Lm1hcChkYXkgPT4gKFxuICAgICAgICB7XG4gICAgICAgICAgICBkdDogZGF5LmR0LCBcbiAgICAgICAgICAgIG1haW46IGRheS5tYWluLCBcbiAgICAgICAgICAgIHdpbmQ6IGRheS53aW5kLCBcbiAgICAgICAgICAgIHdlYXRoZXJEZXNjOiBkYXkud2VhdGhlclswXVxuICAgICAgICB9XG4gICAgKSk7XG4gICAgcmV0dXJuIGZvcmVjYXN0RGF0YTtcbn0iLCJleHBvcnQgY29uc3Qgc2V0V2VhdGhlckljb25CeURlc2NyaXB0aW9uID0gKGRlc2MpID0+IHtcbiAgICBpZihkZXNjLmluY2x1ZGVzKCdyYWluJykpIHtcbiAgICAgICAgcmV0dXJuICcuL2ljb25zL2Rlc3pjei5zdmcnO1xuICAgIH1cbiAgICBlbHNlIGlmKGRlc2MuaW5jbHVkZXMoJ2Nsb3VkcycpKSB7XG4gICAgICAgIHJldHVybiAnLi9pY29ucy96YWNobXVyemVuaWUuc3ZnJztcbiAgICB9XG4gICAgZWxzZSBpZihkZXNjLmluY2x1ZGVzKCdjbGVhciBza3knKSB8fCBkZXNjLmluY2x1ZGVzKCdzdW4nKSkge1xuICAgICAgICByZXR1cm4gJy4vaWNvbnMvc2xvbmNlLnN2Zyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJy4vaWNvbnMvdGVzdC5wbmcnO1xuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgY3JlYXRlTmF2aWdhdGlvbiA9ICgpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uJyk7XG4gICAgY29uc3QgdG9kYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGNvbnN0IGhvdXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGNvbnN0IGxvbmdUZXJtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICB0b2RheS5jbGFzc0xpc3QuYWRkKCduYXYtdG9kYXknKTtcbiAgICB0b2RheS5jbGFzc0xpc3QuYWRkKCd0YWItY2xpY2tlZCcpO1xuICAgIGxvbmdUZXJtLmNsYXNzTGlzdC5hZGQoJ25hdi1sb25nLXRlcm0nKTtcbiAgICB0b2RheS50ZXh0Q29udGVudCA9IFwiVG9kYXlcIjtcbiAgICBob3VyLnRleHRDb250ZW50ID0gJ0hvdXJseSc7XG4gICAgbG9uZ1Rlcm0udGV4dENvbnRlbnQgPSBcIkxvbmcgdGVybVwiO1xuICAgIG5hdmlnYXRpb24uYXBwZW5kQ2hpbGQodG9kYXkpO1xuICAgIG5hdmlnYXRpb24uYXBwZW5kQ2hpbGQobG9uZ1Rlcm0pO1xuXG4gICAgY29uc3QgYWxsVGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZpZ2F0aW9uIGxpJyk7XG4gICAgYWxsVGFicy5mb3JFYWNoKHRhYiA9PiBcbiAgICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8YWxsVGFicy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoYWxsVGFic1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3RhYi1jbGlja2VkJykpe1xuICAgICAgICAgICAgICAgICAgICBhbGxUYWJzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3RhYi1jbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoJ3RhYi1jbGlja2VkJyk7XG4gICAgICAgIH1cbiAgICApKTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVDdXJyZW50V2VhdGhlclBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9jdXJyZW50V2VhdGhlclwiO1xuaW1wb3J0IHsgY3JlYXRlTG9uZ1Rlcm1XZWF0aGVyUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2xvbmdUZXJtV2VhdGhlclwiO1xuaW1wb3J0IHsgY3JlYXRlTmF2aWdhdGlvbiB9IGZyb20gXCIuL2NvbXBvbmVudHMvbmF2aWdhdGlvblwiO1xuXG5jcmVhdGVOYXZpZ2F0aW9uKCk7XG5cbmNyZWF0ZUN1cnJlbnRXZWF0aGVyUGFnZSgpO1xuXG5jb25zdCBzd2l0Y2hQYWdlcyA9ICgpID0+IHtcbiAgICBjb25zdCB0b2RheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtdG9kYXknKTtcbiAgICBjb25zdCBsb25nVGVybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtbG9uZy10ZXJtJyk7XG5cbiAgICB0b2RheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZUN1cnJlbnRXZWF0aGVyUGFnZSlcbiAgICBsb25nVGVybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNyZWF0ZUxvbmdUZXJtV2VhdGhlclBhZ2UpO1xufVxuXG5zd2l0Y2hQYWdlcygpOyJdLCJuYW1lcyI6WyJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjcmVhdGVDaXR5SW5wdXQiLCJjaXR5SW5wdXRDb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiY2l0eUlucHV0IiwiY2xhc3NMaXN0IiwiYWRkIiwiY2l0eUxhYmVsIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJjaXR5RXJyb3IiLCJhcHBlbmRDaGlsZCIsImFwaVVybCIsImFwcElkIiwiZmFocmVuaGVpdFRvQ2Vsc2l1cyIsInZhbHVlIiwia2VsdmluVmFsIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJzZXRUZW1wVmFsdWUiLCJjZWxzaXVzVmFsdWUiLCJ3ZWF0aGVyQ29udGFpbmVyIiwidGVtcGVyYXR1cmUiLCJ0ZW1wVmFsdWUiLCJzZXRIdW1pZGl0eVZhbHVlIiwiaHVtaWRpdHkiLCJodW1pZGl0eVZhbHVlIiwic2V0UHJlc3N1cmVWYWx1ZSIsInByZXNzdXJlIiwicHJlc3N1cmVWYWx1ZSIsInNldFdpbmRWYWx1ZSIsIndpbmQiLCJ3aW5kVmFsdWUiLCJkaXNwbGF5Q2l0eUVycm9yIiwicmVtb3ZlIiwiaGlkZUNpdHlFcnJvciIsImdldENvb3JkaW5hdGVzQnlOYW1lIiwiYXN5bmMiLCJuYW1lIiwiY2l0eURhdGEiLCJlbmRwb2ludCIsImNpdHkiLCJmZXRjaCIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJpc0NpdHkiLCJsZW5ndGgiLCJ4IiwibGF0IiwieSIsImxvbiIsImNyZWF0ZUN1cnJlbnRXZWF0aGVyUGFnZSIsInJlcGxhY2VDaGlsZHJlbiIsImNpdHlOYW1lIiwiZ2lmIiwiZ2lmQ29udGVudCIsIndlYXRoZXJEZXNjcmlwdGlvbiIsImNyZWF0ZUdpZkNvbXBvbmVudCIsInRlbXBEZXNjIiwiY3JlYXRlVGVtcGVyYXR1cmVDb21wb25lbnQiLCJodW1pZGl0eURlc2MiLCJjcmVhdGVIdW1pZGl0eUNvbXBvbmVudCIsInByZXNzdXJlRGVzYyIsImNyZWF0ZVByZXNzdXJlQ29tcG9uZW50Iiwid2luZERlc2MiLCJjcmVhdGVXaW5kQ29tcG9uZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvb3JkaW5hdGVzRGF0YSIsIndlYXRoZXIiLCJ4Q29vcmRpbmF0ZSIsInlDb29yZGluYXRlIiwiY3VycmVudFdlYXRoZXJEYXRhIiwiY3VycmVudFdlYXRoZXIiLCJtYWluIiwid2VhdGhlckRlc2MiLCJnZXRDdXJyZW50V2VhdGhlckJ5Q29vcmRpbmF0ZXMiLCJrZXl3b3JkT2ZXZWF0aGVyR2lmIiwiZGVzY3JpcHRpb24iLCJnaWZTcmMiLCJ0ZXh0Iiwid2VhdGhlckdpZkRhdGEiLCJ3ZWF0aGVyR2lmIiwiY29uZmlybSIsImRhdGEiLCJpbWFnZXMiLCJvcmlnaW5hbCIsInVybCIsImdldFdlYXRoZXJHaWZCeVRleHQiLCJkZXNjIiwiZ2lmVXJsIiwic2V0R2lmVmFsdWUiLCJ0ZW1wIiwic3BlZWQiLCJnZXREYXRlRnJvbVRpbWVzdGFtcCIsInRpbWVTdGFtcCIsImRhdGUiLCJEYXRlIiwiZ2V0SG91ciIsImdldEhvdXJzIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJjcmVhdGVMb25nVGVybVdlYXRoZXJQYWdlIiwiZGF5c0xpc3QiLCJjcmVhdGVTaW5nbGVEYXlGb3JlY2FzdENvbXBvbmVudCIsImxvYWRlcldyYXBwZXIiLCJsb2FkZXJJbWFnZSIsImRpc3BsYXlMb2FkZXIiLCJ3ZWF0aGVyRm9yZWNhc3REYXRhIiwibGlzdCIsIm1hcCIsImRheSIsImR0IiwiZ2V0Rml2ZURheXNXZWF0aGVyQnlDb29yZGluYXRlcyIsInJlbW92ZUNoaWxkIiwiaGlkZUxvYWRlciIsIndlYXRoZXJEYXRhIiwiZm9yRWFjaCIsInNpbmdsZURheSIsImRlc2NDb250YWluZXIiLCJkYXRlQ29udGFpbmVyIiwiZGF0ZURheSIsImRhdGVIb3VyIiwid2VhdGhlckljb25BbmREZXNjIiwid2VhdGhlckljb24iLCJpbmNsdWRlcyIsIndlYXRoZXJNZXRyaWNzIiwidGVtcENvbnRhaW5lciIsIndpbmRDb250YWluZXIiLCJodW1pZGl0eUNvbnRhaW5lciIsInNldExvbmdUZXJtRm9yZWNhc3QiLCJuYXZpZ2F0aW9uIiwidG9kYXkiLCJob3VyIiwibG9uZ1Rlcm0iLCJhbGxUYWJzIiwicXVlcnlTZWxlY3RvckFsbCIsInRhYiIsImkiLCJjb250YWlucyIsImNyZWF0ZU5hdmlnYXRpb24iLCJzd2l0Y2hQYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=